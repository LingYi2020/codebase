<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Document</title>
<style>


</style>
</head>
<body>

<button id="btn">按钮</button>

<script>
// 作用域：词法作用域（静态作用域）和 动态作用域
// js使用的是 词法作用域（静态作用域），主要关注函数在哪声明的
// 预解析：
/* globalScope = {
  a: undefined, -> 1
  fn1: function (){
    console.log(a)
  },
  fn2: function (){
    var a = 2
    fn1()
  },
  fn2Scope: {
    a: undefined -> 2
  },
  fn1Scope: {
    
  }
}
// 逐行执行
a = 1
fn2()
  a = 2
  fn1()
    console.log(a)//1 */

// var a = 1
// function fn1(){
//   console.log(a)
// }
// function fn2(){
//   var a = 2
//   fn1()
// }
// fn2()

// 类似 动态作用域(主要关注函数在哪被调用)
// function show(){
//   console.log(this)
// }
// show()//window
// btn.onclick = show

// var a = 3
// function outer(){
//   var a = 5
//   return function (){
//     a++
//     console.log(a)
//   }
// }
// var inner = outer()
// inner()//6
// inner()//7



// 作用域链本质上是一个指针列表

// 执行上下文（执行环境）
// 1.创建执行上下文阶段
/* globalEC = {// 全局执行上下文对象
  // ...
  VO: {//变量对象 window
    alert: function(){},
    name: '',
    x: undefined, // -> 1
    fn1: function (){
      // ... 
    }
  },
  this: window
}
fn1EC = {// fn1执行上下文对象
  scopeChain: [fn1EC.AO, globalEC.VO],//作用域链
  AO: {//活动对象
    a: 2,
    b: 3,
    y: undefined,// -> 2
    arguments: {
      0: 2,
      1: 3,
      length: 2,
      callee: function (){}
    }
  },
  this: window
} */
// 2.执行阶段
/* x = 1
fn1(2,3)
  y = 2
  console.log( a+b )//2+3=5
  console.log( x+y )//1+2=3
  alert('hi')
  console.log(abc)//报错 */

// var x = 1
// function fn1(a,b){
//   var y = 2
//   console.log( a+b )
//   console.log( x+y )
//   alert('hi')
//   console.log(abc)
// }
// fn1(2,3)


// 垃圾回收：
// 引用计数
// 标记清除


</script>
</body>
</html>